---
title: 关键字：static 和 extern
date: 2019/10/13
tags: c
comments: true
---

static 与 extern
<!--more-->

## 基础概念

* 外部函数  
如果在当前文件中定义的函数允许其他文件访问、调用，就称为外部函数。C语言规定，不允许有同名的外部函数。  
extern可以省略，默认情况下，所有的函数就是外部函数  

* 内部函数  
如果在当前文件中定义的函数不允许其他文件访问、调用，只能在内部使用，就称为内部函数。  
C语言规定不同的源文件可以有同名的内部函数，并且互不干扰。

## extern

* **定义函数**  
如果在函数的最左边加上关键字extern，则表示此函数是外部函数，可供其他文件调用。  
C语言规定，如果在定义函数时省略extern，则隐含为外部函数。

* **声明函数**  
在一个文件中要调用其他文件中的外部函数，则需要在当前文件中用extern声明该外部函数，然后就可以使用。  
这里的extern也可以省略。

* **声明变量**  
extern int a;  
声明一个全局变量，必须在调用的函数的之前声明  
不同文件，外部变量不能重名  
我们也可以将全局变量a声明为局部变量后再使用  
extern是用来声明已经定义过而且能够访问的变量  

```C
extern int a;

int main(int argc, char *argv[]) {
    extern int a;
    a = 10;
    return 0;
}

int a;
```

## static

* **定义函数**  
在函数的最左边加上static可以把该函数声明为内部函数(又叫静态函数)。  
这样该函数就只能在其定义所在的文件中使用。  
如果在不同的文件中有同名的内部函数，则互不干扰。

* **声明函数**  
static也可以用来**声明**一个内部函数

* **定义变量**  
很多时候，我们并不想让源文件中的全局变量跟其他源文件共享，相当于私有的全局变量。  
那么你就得用static关键字来**定义变量**。  

